2024-01-01 21:13:01.103 | ERROR    | utils.loggings:exception:40 - (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。)')
[SQL: SELECT user_info.user_id AS user_info_user_id, user_info.user_name AS user_info_user_name, user_info.profile_picture AS user_info_profile_picture, user_info.signature AS user_info_signature, user_info.gender AS user_info_gender, user_info.phone AS user_info_phone, user_info.date_of_birth AS user_info_date_of_birth, user_info.address AS user_info_address 
FROM user_info 
WHERE user_info.phone IS NULL 
 LIMIT %(param_1)s]
[parameters: {'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\connections.py", line 736, in _read_bytes
    data = self._rfile.read(num_bytes)
           │    │           └ 4
           │    └ None
           └ <pymysql.connections.Connection object at 0x000001F43048C520>

  File "D:\program\Anaconda3\envs\skillsharing\lib\socket.py", line 669, in readinto
    return self._sock.recv_into(b)
           │    │               └ <memory at 0x000001F43043B4C0>
           │    └ None
           └ <socket.SocketIO object at 0x000001F43048C5E0>

TimeoutError: [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001F42FB1AE50>
    │    └ <sqlalchemy.dialects.mysql.pymysql.MySQLDialect_pymysql object at 0x000001F42FF414F0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F4305A9A60>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'param_1': 1}
    │      │       └ 'SELECT user_info.user_id AS user_info_user_id, user_info.user_name AS user_info_user_name, user_info.profile_picture AS user...
    │      └ <function Cursor.execute at 0x000001F430121940>
    └ <pymysql.cursors.Cursor object at 0x000001F4305A9B20>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\cursors.py", line 158, in execute
    result = self._query(query)
             │    │      └ 'SELECT user_info.user_id AS user_info_user_id, user_info.user_name AS user_info_user_name, user_info.profile_picture AS user...
             │    └ <function Cursor._query at 0x000001F430121DC0>
             └ <pymysql.cursors.Cursor object at 0x000001F4305A9B20>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\cursors.py", line 325, in _query
    conn.query(q)
    │    │     └ 'SELECT user_info.user_id AS user_info_user_id, user_info.user_name AS user_info_user_name, user_info.profile_picture AS user...
    │    └ <function Connection.query at 0x000001F430132D30>
    └ <pymysql.connections.Connection object at 0x000001F43048C520>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
    │    │                │    │                             └ False
    │    │                │    └ <function Connection._read_query_result at 0x000001F4301333A0>
    │    │                └ <pymysql.connections.Connection object at 0x000001F43048C520>
    │    └ 1
    └ <pymysql.connections.Connection object at 0x000001F43048C520>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\connections.py", line 779, in _read_query_result
    result.read()
    │      └ <function MySQLResult.read at 0x000001F430133B80>
    └ <pymysql.connections.MySQLResult object at 0x000001F43055D040>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
                   │    └ None
                   └ <pymysql.connections.MySQLResult object at 0x000001F43055D040>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
                    │    └ <function Connection._read_bytes at 0x000001F430133280>
                    └ <pymysql.connections.Connection object at 0x000001F43048C520>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\connections.py", line 742, in _read_bytes
    raise err.OperationalError(
          │   └ <class 'pymysql.err.OperationalError'>
          └ <module 'pymysql.err' from 'D:\\program\\Anaconda3\\envs\\skillsharing\\lib\\site-packages\\pymysql\\err.py'>

pymysql.err.OperationalError: (2013, 'Lost connection to MySQL server during query ([WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。)')


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "D:\program\Anaconda3\envs\skillsharing\lib\threading.py", line 890, in _bootstrap
    self._bootstrap_inner()
    │    └ <function Thread._bootstrap_inner at 0x000001F42C2C39D0>
    └ <Thread(Thread-1, started daemon 25372)>

  File "D:\program\Anaconda3\envs\skillsharing\lib\threading.py", line 932, in _bootstrap_inner
    self.run()
    │    └ <function Thread.run at 0x000001F42C2C3700>
    └ <Thread(Thread-1, started daemon 25372)>

  File "D:\program\Anaconda3\envs\skillsharing\lib\threading.py", line 870, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {}
    │    │        │    │        └ <Thread(Thread-1, started daemon 25372)>
    │    │        │    └ ()
    │    │        └ <Thread(Thread-1, started daemon 25372)>
    │    └ <bound method BaseWSGIServer.serve_forever of <werkzeug.serving.BaseWSGIServer object at 0x000001F4303B5100>>
    └ <Thread(Thread-1, started daemon 25372)>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\werkzeug\serving.py", line 806, in serve_forever
    super().serve_forever(poll_interval=poll_interval)
                                        └ 0.5

  File "D:\program\Anaconda3\envs\skillsharing\lib\socketserver.py", line 237, in serve_forever
    self._handle_request_noblock()
    │    └ <function BaseServer._handle_request_noblock at 0x000001F42C2C9040>
    └ <werkzeug.serving.BaseWSGIServer object at 0x000001F4303B5100>

  File "D:\program\Anaconda3\envs\skillsharing\lib\socketserver.py", line 316, in _handle_request_noblock
    self.process_request(request, client_address)
    │    │               │        └ ('127.0.0.1', 33564)
    │    │               └ <socket.socket fd=980, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=(...
    │    └ <function BaseServer.process_request at 0x000001F42C2C91F0>
    └ <werkzeug.serving.BaseWSGIServer object at 0x000001F4303B5100>

  File "D:\program\Anaconda3\envs\skillsharing\lib\socketserver.py", line 347, in process_request
    self.finish_request(request, client_address)
    │    │              │        └ ('127.0.0.1', 33564)
    │    │              └ <socket.socket fd=980, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=(...
    │    └ <function BaseServer.finish_request at 0x000001F42C2C9310>
    └ <werkzeug.serving.BaseWSGIServer object at 0x000001F4303B5100>

  File "D:\program\Anaconda3\envs\skillsharing\lib\socketserver.py", line 360, in finish_request
    self.RequestHandlerClass(request, client_address, self)
    │    │                   │        │               └ <werkzeug.serving.BaseWSGIServer object at 0x000001F4303B5100>
    │    │                   │        └ ('127.0.0.1', 33564)
    │    │                   └ <socket.socket fd=980, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 5000), raddr=(...
    │    └ <class 'werkzeug.serving.WSGIRequestHandler'>
    └ <werkzeug.serving.BaseWSGIServer object at 0x000001F4303B5100>

  File "D:\program\Anaconda3\envs\skillsharing\lib\socketserver.py", line 720, in __init__
    self.handle()
    │    └ <function WSGIRequestHandler.handle at 0x000001F42E06AAF0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x000001F4304BF2B0>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\werkzeug\serving.py", line 390, in handle
    super().handle()

  File "D:\program\Anaconda3\envs\skillsharing\lib\http\server.py", line 426, in handle
    self.handle_one_request()
    │    └ <function BaseHTTPRequestHandler.handle_one_request at 0x000001F42DE5C1F0>
    └ <werkzeug.serving.WSGIRequestHandler object at 0x000001F4304BF2B0>

  File "D:\program\Anaconda3\envs\skillsharing\lib\http\server.py", line 414, in handle_one_request
    method()
    └ <bound method WSGIRequestHandler.run_wsgi of <werkzeug.serving.WSGIRequestHandler object at 0x000001F4304BF2B0>>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\werkzeug\serving.py", line 362, in run_wsgi
    execute(self.server.app)
    │       │    │      └ <werkzeug.debug.DebuggedApplication object at 0x000001F430397880>
    │       │    └ <werkzeug.serving.BaseWSGIServer object at 0x000001F4303B5100>
    │       └ <werkzeug.serving.WSGIRequestHandler object at 0x000001F4304BF2B0>
    └ <function WSGIRequestHandler.run_wsgi.<locals>.execute at 0x000001F4304BB1F0>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\werkzeug\serving.py", line 325, in execute
    for data in application_iter:
                └ <generator object DebuggedApplication.debug_application at 0x000001F4303DD970>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\werkzeug\debug\__init__.py", line 330, in debug_application
    app_iter = self.app(environ, start_response)
               │    │   │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x000001F430473550>
               │    │   └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=980>, 'wsgi.errors': <_io.TextIOWr...
               │    └ <Flask 'app'>
               └ <werkzeug.debug.DebuggedApplication object at 0x000001F430397880>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\flask\app.py", line 2213, in __call__
    return self.wsgi_app(environ, start_response)
           │    │        │        └ <function WSGIRequestHandler.run_wsgi.<locals>.start_response at 0x000001F430473550>
           │    │        └ {'wsgi.version': (1, 0), 'wsgi.url_scheme': 'http', 'wsgi.input': <_io.BufferedReader name=980>, 'wsgi.errors': <_io.TextIOWr...
           │    └ <function Flask.wsgi_app at 0x000001F42E92D790>
           └ <Flask 'app'>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\flask\app.py", line 2190, in wsgi_app
    response = self.full_dispatch_request()
               │    └ <function Flask.full_dispatch_request at 0x000001F42E929CA0>
               └ <Flask 'app'>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\flask\app.py", line 1484, in full_dispatch_request
    rv = self.dispatch_request()
         │    └ <function Flask.dispatch_request at 0x000001F42E929C10>
         └ <Flask 'app'>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\flask\app.py", line 1469, in dispatch_request
    return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
           │    │           │    │              │    │            └ {}
           │    │           │    │              │    └ 'userInfo.UserInfo'
           │    │           │    │              └ <Rule '/api_1_0/userInfo' (PUT, HEAD, OPTIONS, GET, DELETE, POST) -> userInfo.UserInfo>
           │    │           │    └ {'static': <function Flask.__init__.<locals>.<lambda> at 0x000001F42FF24670>, 'apiversion.Apiversion': <function View.as_view...
           │    │           └ <Flask 'app'>
           │    └ <function Flask.ensure_sync at 0x000001F42E929EE0>
           └ <Flask 'app'>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\flask_restful\__init__.py", line 489, in wrapper
    resp = resource(*args, **kwargs)
           │         │       └ {}
           │         └ ()
           └ <function View.as_view.<locals>.view at 0x000001F430349D30>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\flask\views.py", line 109, in view
    return current_app.ensure_sync(self.dispatch_request)(**kwargs)
           │                       │    │                   └ {}
           │                       │    └ <function Resource.dispatch_request at 0x000001F43014FB80>
           │                       └ <api_1_0.userInfoResource.userInfoResource.UserInfoResource object at 0x000001F43057FBE0>
           └ <Flask 'app'>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\flask_restful\__init__.py", line 604, in dispatch_request
    resp = meth(*args, **kwargs)
           │     │       └ {}
           │     └ ()
           └ <bound method UserInfoResource.post of <class 'api_1_0.userInfoResource.userInfoResource.UserInfoResource'>>

  File "D:\Uni_study\greate3\database\skill_sharing\api.project.com\api_1_0\userInfoResource\userInfoResource.py", line 129, in post
    res = UserInfoController.create_or_update_user_from_wechat(phone_number)
          │                  │                                 └ None
          │                  └ <classmethod object at 0x000001F43034E550>
          └ <class 'controller.userInfoController.UserInfoController'>

> File "D:\Uni_study\greate3\database\skill_sharing\api.project.com\controller\userInfoController.py", line 60, in create_or_update_user_from_wechat
    user = cls.query.filter_by(phone=phone_number).first()
           │   │                     └ None
           │   └ <flask_sqlalchemy.model._QueryProperty object at 0x000001F42FB1DAF0>
           └ <class 'controller.userInfoController.UserInfoController'>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\orm\query.py", line 2748, in first
    return self.limit(1)._iter().first()  # type: ignore
           │    └ <function Query.limit at 0x000001F42FD63280>
           └ <flask_sqlalchemy.query.Query object at 0x000001F4305A9370>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\orm\query.py", line 2847, in _iter
    result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
            │                  │    │      │      │    │       └ <function Session.execute at 0x000001F42FDEEAF0>
            │                  │    │      │      │    └ <sqlalchemy.orm.session.Session object at 0x000001F43055D370>
            │                  │    │      │      └ <flask_sqlalchemy.query.Query object at 0x000001F43055D9D0>
            │                  │    │      └ ~_T
            │                  │    └ <class 'sqlalchemy.engine.result.Result'>
            │                  └ ~_T
            └ typing.Union

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\orm\session.py", line 2308, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x000001F42FDEEA60>
           └ <sqlalchemy.orm.session.Session object at 0x000001F43055D370>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\orm\session.py", line 2190, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod object at 0x000001F42FC744C0>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\orm\context.py", line 293, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x000001F42F90D670>
             └ <sqlalchemy.engine.base.Connection object at 0x000001F4305A9A60>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x000001F4305A91C0>>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\sql\elements.py", line 517, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x000001F42F90D940>
           └ <sqlalchemy.engine.base.Connection object at 0x000001F4305A9A60>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\engine\base.py", line 1639, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x000001F42F90DAF0>
          └ <sqlalchemy.engine.base.Connection object at 0x000001F4305A9A60>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\engine\base.py", line 1848, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x000001F42F90DB80>
           └ <sqlalchemy.engine.base.Connection object at 0x000001F4305A9A60>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\engine\base.py", line 1988, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x000001F42F90DDC0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F4305A9A60>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\engine\base.py", line 2344, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ OperationalError(2013, 'Lost connection to MySQL server during query ([WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。)')
          │                    │              └ (<class 'pymysql.err.OperationalError'>, OperationalError(2013, 'Lost connection to MySQL server during query ([WinError 1006...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ OperationalError("(pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([WinError 10060] 由于连接方...

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\engine\base.py", line 1969, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x000001F42FB1AE50>
    │    └ <sqlalchemy.dialects.mysql.pymysql.MySQLDialect_pymysql object at 0x000001F42FF414F0>
    └ <sqlalchemy.engine.base.Connection object at 0x000001F4305A9A60>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\sqlalchemy\engine\default.py", line 922, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ {'param_1': 1}
    │      │       └ 'SELECT user_info.user_id AS user_info_user_id, user_info.user_name AS user_info_user_name, user_info.profile_picture AS user...
    │      └ <function Cursor.execute at 0x000001F430121940>
    └ <pymysql.cursors.Cursor object at 0x000001F4305A9B20>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\cursors.py", line 158, in execute
    result = self._query(query)
             │    │      └ 'SELECT user_info.user_id AS user_info_user_id, user_info.user_name AS user_info_user_name, user_info.profile_picture AS user...
             │    └ <function Cursor._query at 0x000001F430121DC0>
             └ <pymysql.cursors.Cursor object at 0x000001F4305A9B20>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\cursors.py", line 325, in _query
    conn.query(q)
    │    │     └ 'SELECT user_info.user_id AS user_info_user_id, user_info.user_name AS user_info_user_name, user_info.profile_picture AS user...
    │    └ <function Connection.query at 0x000001F430132D30>
    └ <pymysql.connections.Connection object at 0x000001F43048C520>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\connections.py", line 549, in query
    self._affected_rows = self._read_query_result(unbuffered=unbuffered)
    │    │                │    │                             └ False
    │    │                │    └ <function Connection._read_query_result at 0x000001F4301333A0>
    │    │                └ <pymysql.connections.Connection object at 0x000001F43048C520>
    │    └ 1
    └ <pymysql.connections.Connection object at 0x000001F43048C520>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\connections.py", line 779, in _read_query_result
    result.read()
    │      └ <function MySQLResult.read at 0x000001F430133B80>
    └ <pymysql.connections.MySQLResult object at 0x000001F43055D040>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\connections.py", line 1157, in read
    first_packet = self.connection._read_packet()
                   │    └ None
                   └ <pymysql.connections.MySQLResult object at 0x000001F43055D040>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\connections.py", line 696, in _read_packet
    packet_header = self._read_bytes(4)
                    │    └ <function Connection._read_bytes at 0x000001F430133280>
                    └ <pymysql.connections.Connection object at 0x000001F43048C520>

  File "D:\program\Anaconda3\envs\skillsharing\lib\site-packages\pymysql\connections.py", line 742, in _read_bytes
    raise err.OperationalError(
          │   └ <class 'pymysql.err.OperationalError'>
          └ <module 'pymysql.err' from 'D:\\program\\Anaconda3\\envs\\skillsharing\\lib\\site-packages\\pymysql\\err.py'>

sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2013, 'Lost connection to MySQL server during query ([WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。)')
[SQL: SELECT user_info.user_id AS user_info_user_id, user_info.user_name AS user_info_user_name, user_info.profile_picture AS user_info_profile_picture, user_info.signature AS user_info_signature, user_info.gender AS user_info_gender, user_info.phone AS user_info_phone, user_info.date_of_birth AS user_info_date_of_birth, user_info.address AS user_info_address 
FROM user_info 
WHERE user_info.phone IS NULL 
 LIMIT %(param_1)s]
[parameters: {'param_1': 1}]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
